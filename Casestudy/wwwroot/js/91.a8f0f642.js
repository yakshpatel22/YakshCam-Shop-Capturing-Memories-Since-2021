"use strict";(self["webpackChunkcasestudy"]=self["webpackChunkcasestudy"]||[]).push([[91],{5572:(e,t,s)=>{s.d(t,{C:()=>o,_:()=>n});const a="/api/",n=async e=>{let t,s=r();try{let n=await fetch(`${a}${e}`,{method:"GET",headers:s});t=await n.json()}catch(n){console.log(n),t={error:`Error has occured: ${n.message}`}}return t},o=async(e,t)=>{let s,n=r();try{let o=await fetch(`${a}${e}`,{method:"POST",headers:n,body:JSON.stringify(t)});s=await o.json()}catch(o){s=o}return s},r=()=>{const e=new Headers,t=JSON.parse(sessionStorage.getItem("customer"));return t?(e.append("Content-Type","application/json"),e.append("Authorization","Bearer "+t.token)):e.append("Content-Type","application/json"),e}},4091:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(9835),n=s(1957);const o={class:"text-center q-mt-md"},r=["src"],d=(0,a._)("div",{class:"text-h4 text-deep-orange-8"},"Finding 3 Closest Branches",-1),l=(0,a._)("br",null,null,-1),i={style:{height:"50vh",width:"90vw","margin-left":"5vw",border:"solid"},ref:"mapRef"};function c(e,t,s,c,p,u){const h=(0,a.up)("q-input"),m=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("img",{src:"/img/logo.png",width:"80",height:"75","margin-top":"20px"},null,8,r),d,(0,a._)("div",null,[(0,a.Wm)(h,{class:"q-ma-lg text-h5",placeholder:"enter current address",id:"address",modelValue:c.state.address,"onUpdate:modelValue":t[0]||(t[0]=e=>c.state.address=e)},null,8,["modelValue"]),l]),(0,a.Wm)(m,{label:"Find 3",onClick:c.genMap,class:"q-mb-md text-deep-orange-8",style:{width:"30vw"}},null,8,["onClick"]),(0,a.wy)((0,a._)("div",i,null,512),[[n.F8,!0===c.state.showmap]])])}var p=s(499),u=s(5572);const h={name:"StoreLocator",setup(){const e=(0,p.iH)(null);let t=(0,p.qj)({status:"",address:"",showmap:!1});const s=async()=>{try{t.showmap=!0;const s=window.tt;let a=`https://api.tomtom.com/search/2/geocode/${t.address}.json?key=s7fBdsAIDtd52zxetXkaNSp6Ts2jxruG`,n=await fetch(a),o=await n.json(),r=o.results[0].position.lat,d=o.results[0].position.lon,l=s.map({key:"s7fBdsAIDtd52zxetXkaNSp6Ts2jxruG",container:e.value,source:"vector/1/basic-main",center:[d,r],zoom:8});l.addControl(new s.FullscreenControl),l.addControl(new s.NavigationControl);let i=await(0,u._)(`branch/${r}/${d}`);console.log(i),i.forEach((e=>{let t=(new s.Marker).setLngLat([e.longitude,e.latitude]).addTo(l),a=25,n=new s.Popup({offset:a});n.setHTML(`<div id="popup">Store#: ${e.id}</div><div>${e.street}, ${e.city}\n            <br/>${e.distance.toFixed(2)} km</div>`),t.setPopup(n)}))}catch(s){t.status=s.message}};return{mapRef:e,state:t,genMap:s}}};var m=s(1639),w=s(6611),g=s(4455),v=s(9984),y=s.n(v);const f=(0,m.Z)(h,[["render",c]]),k=f;y()(h,"components",{QInput:w.Z,QBtn:g.Z})}}]);