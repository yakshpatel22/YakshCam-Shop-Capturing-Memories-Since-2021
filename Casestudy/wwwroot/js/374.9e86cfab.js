"use strict";(self["webpackChunkcasestudy"]=self["webpackChunkcasestudy"]||[]).push([[374],{5572:(e,t,a)=>{a.d(t,{C:()=>s,_:()=>r});const l="/api/",r=async e=>{let t,a=d();try{let r=await fetch(`${l}${e}`,{method:"GET",headers:a});t=await r.json()}catch(r){console.log(r),t={error:`Error has occured: ${r.message}`}}return t},s=async(e,t)=>{let a,r=d();try{let s=await fetch(`${l}${e}`,{method:"POST",headers:r,body:JSON.stringify(t)});a=await s.json()}catch(s){a=s}return a},d=()=>{const e=new Headers,t=JSON.parse(sessionStorage.getItem("customer"));return t?(e.append("Content-Type","application/json"),e.append("Authorization","Bearer "+t.token)):e.append("Content-Type","application/json"),e}},7081:(e,t,a)=>{a.d(t,{p:()=>r,x:()=>l});const l=e=>e.toLocaleString("en-US",{style:"currency",currency:"USD"}),r=e=>{let t;t=void 0===e?new Date:new Date(Date.parse(e));let a=t.getDate(),l=t.getMonth()+1,r=t.getFullYear(),s=(t.getHours(),t.getMinutes());return s<10&&(s="0"+s),r+"-"+l+"-"+a}},5374:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var l=a(9835),r=a(6970);const s={class:"text-center"},d=["src"],o=(0,l._)("div",{class:"text-h4 text-deep-orange-8"},"Order History",-1),n={class:"text-positive text-h6 q-mt-lg q-mb-lg"},c=(0,l.Uk)("#"),u=(0,l.Uk)("Date"),i=["src"],m=(0,l.Uk)("Name"),g=(0,l.Uk)("Quantities"),w=(0,l.Uk)("Extended"),x=(0,l.Uk)(" S O B "),p=(0,l.Uk)("Sub:"),f=(0,l.Uk)("Tax(13%): "),h=(0,l.Uk)("Total: ");function _(e,t,a,_,W,y){const k=(0,l.up)("q-item-label"),b=(0,l.up)("q-item-section"),S=(0,l.up)("q-item"),U=(0,l.up)("q-list"),q=(0,l.up)("q-card"),D=(0,l.up)("q-btn"),O=(0,l.up)("q-card-actions"),C=(0,l.up)("q-card-section"),z=(0,l.up)("q-dialog"),v=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",s,[(0,l._)("img",{src:"/img/logo.png",width:"80",height:"75","margin-top":"20px"},null,8,d),o,(0,l._)("div",n,(0,r.zw)(_.state.status),1)]),(0,l.Wm)(q,{class:"q-ma-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{highlight:""},{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[c])),_:1})])),_:1}),(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[u])),_:1})])),_:1})])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(_.state.orders,(e=>((0,l.wg)(),(0,l.j4)(S,{clickable:"",key:e.id,onClick:t=>_.selectOrder(e.id)},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.id),1)])),_:2},1024),(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(_.formatDate(e.dateCreated)),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,l.Wm)(z,{modelValue:_.state.selectedAOrder,"onUpdate:modelValue":t[0]||(t[0]=e=>_.state.selectedAOrder=e),"transition-show":"rotate","transition-hide":"rotate"},{default:(0,l.w5)((()=>[(0,l.Wm)(q,null,{default:(0,l.w5)((()=>[(0,l.Wm)(O,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(D,{flat:"",label:"X",color:"deep-orange-8",class:"text-h5"},null,512),[[v]])])),_:1}),(0,l.Wm)(C,{class:"text-h5 text-center text-deep-orange-8 text-bold col-2"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Order "+(0,r.zw)(_.state.orderDetails[0].orderId),1)])),_:1}),(0,l.Wm)(C,{class:"text-h7 text-center text-deep-orange-8 text-bold col-2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(_.state.orderDetails[0].dateCreated),1)])),_:1}),(0,l.Wm)(C,{class:"text-center"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:"/img/logo.png",width:"80",height:"75"},null,8,i)])),_:1}),(0,l.Wm)(U,{highlight:""},{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"text-h7 text-center text-deep-orange-8 text-bold"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[m])),_:1})])),_:1}),(0,l.Wm)(b,{class:"text-h7 text-center text-deep-orange-8 text-bold",style:{"margin-left":"40px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[g])),_:1})])),_:1}),(0,l.Wm)(b,{class:"text-h7 text-center text-deep-orange-8 text-bold",style:{"margin-left":"50px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[w])),_:1})])),_:1})])),_:1}),(0,l.Wm)(U,{separator:""},{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"text-deep-orange-8 text-bold text-center",style:{"word-spacing":"20px"}},{default:(0,l.w5)((()=>[x])),_:1})])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(_.state.orderDetails,(e=>((0,l.wg)(),(0,l.j4)(S,{key:e.orderId},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"text-left",style:{"font-size":"10px"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.productName),1)])),_:2},1024),(0,l.Wm)(b,{class:"text-center col-5",style:{"word-spacing":"20px"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.qtySold)+" "+(0,r.zw)(e.qtyOrdered)+" "+(0,r.zw)(e.qtyBackOrdered),1)])),_:2},1024),(0,l.Wm)(b,{class:"text-right"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(_.formatCurrency(e.sellingPrice)),1)])),_:2},1024)])),_:2},1024)))),128)),(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"text-h7 text-right text-bold"}),(0,l.Wm)(b,{class:"text-h7 text-deep-orange-8 text-right text-bold"},{default:(0,l.w5)((()=>[p])),_:1}),(0,l.Wm)(b,{class:"text-right"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(_.formatCurrency(_.state.sub)),1)])),_:1})])),_:1}),(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"text-h7 text-right text-bold"}),(0,l.Wm)(b,{class:"text-h7 text-deep-orange-8 text-left text-bold",style:{"margin-right":"-50px"}},{default:(0,l.w5)((()=>[f])),_:1}),(0,l.Wm)(b,{class:"text-right"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(_.formatCurrency(_.state.tax)),1)])),_:1})])),_:1}),(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"text-h7 text-right text-bold"}),(0,l.Wm)(b,{class:"text-h7 text-right text-bold text-deep-orange-8"},{default:(0,l.w5)((()=>[h])),_:1}),(0,l.Wm)(b,{class:"text-right text-deep-orange-8 text-bold"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(_.formatCurrency(_.state.sub+_.state.tax)),1)])),_:1})])),_:1}),(0,l.Wm)(b,{class:"text-center text-positive"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(_.state.dialogStatus)+" "+(0,r.zw)(_.state.orderDetails[0].orderId),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var W=a(499),y=a(5572),k=a(7081);const b={setup(){let e=(0,W.qj)({status:"",orders:[],dialogStatus:"",selectedAOrder:!1,orderDetails:[],orderSelected:{id:0,orderAmount:0,orderLineItems:[{id:0,qtySold:0,qtyOnBackOrdered:0,qtyOrdered:0,productId:"",SellingPrice:0}]},sub:0,tax:0});(0,l.bv)((()=>{t()}));const t=async()=>{try{let t=JSON.parse(sessionStorage.getItem("customer"));const a=await(0,y._)(`order/${t.email}`);void 0===a.error?(e.orders=a,e.status=`loaded ${e.orders.length} orders`):e.status=a.error}catch(t){console.log(t),e.status=`Error has occured: ${t.message}`}},a=async t=>{try{let a=JSON.parse(sessionStorage.getItem("customer"));const l=await(0,y._)(`order/${t}/${a.email}`);e.orderDetails=l,e.dialogStatus="details for order ",e.selectedAOrder=!0,e.orderSelected=e.orders.find((e=>e.id===t)),e.orderDetails.forEach((t=>{0==t.qtySold?e.sub:e.sub+=t.sellingPrice,e.tax+=.13*t.sellingPrice}))}catch(a){console.log(a),e.status=`Error has occured: ${a.message}`}};return{state:e,formatDate:k.p,selectOrder:a,formatCurrency:k.x}}};var S=a(1639),U=a(4458),q=a(3246),D=a(490),O=a(1233),C=a(3115),z=a(7743),v=a(1821),I=a(4455),Q=a(3190),Z=a(2146),$=a(9984),j=a.n($);const A=(0,S.Z)(b,[["render",_]]),E=A;j()(b,"components",{QCard:U.Z,QList:q.Z,QItem:D.Z,QItemSection:O.Z,QItemLabel:C.Z,QDialog:z.Z,QCardActions:v.Z,QBtn:I.Z,QCardSection:Q.Z}),j()(b,"directives",{ClosePopup:Z.Z})}}]);